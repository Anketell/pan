#------------------------------------------------------------------------------

wait_open() 
{ 
   (
      lsof "${1}"
      while (( ${?}==1 )); do
         lsof "${1}"
      done
   ) > /dev/null
}

#------------------------------------------------------------------------------

pan() 
{ 
   DIR=`mktemp -d /tmp/XXXXXX`
   TMP="${DIR}/man ${@}"
   man -t -Tps ${@} > "${TMP}.ps"
   if [ $? -eq 0 ]; then
      ps2pdf - "${TMP}" < "${TMP}.ps"
      evince "${TMP}" &
      wait_open "${TMP}"
   fi
   rm -rf ${DIR}
}

#------------------------------------------------------------------------------
